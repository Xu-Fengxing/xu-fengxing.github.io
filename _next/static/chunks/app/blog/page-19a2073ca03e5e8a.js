(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2066:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5155),a=r(2115),l=r(5695),n=r(9685),o=r(6474),c=r(9065);function i(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),[r,i]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),[h,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=t.get("category"),r=t.get("tag"),s=t.get("year");e?i(e):r&&i(r),s?g(parseInt(s)):g(null)},[t]);let p=t=>{let s=r===t?null:t;i(s);let a=new URLSearchParams;s&&(c.OZ.some(e=>e.category===s)?a.set("category",s):a.set("tag",s)),h&&a.set("year",h.toString());let l=a.toString()?"/blog?".concat(a.toString()):"/blog";e.push(l)},f=e=>{x(e),e.trim()&&i(null)},b=(e,t)=>{if(!t.trim())return e;let r=RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(r).map((e,t)=>r.test(e)?(0,s.jsx)("span",{className:"text-blue-500 font-medium",children:e},t):e)},j=e=>e.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/^\s*[-*+]\s+/gm,"• ").replace(/^\s*\d+\.\s+/gm,"").trim(),v=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(!t.trim()||!e)return null;let s=e.toLowerCase().indexOf(t.toLowerCase());if(-1===s)return null;let a=Math.max(0,s-r/2),l=Math.min(e.length,s+t.length+r/2),n=e.substring(a,l);return a>0&&(n="..."+n),l<e.length&&(n+="..."),j(n)},N=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;let r="",s=Math.abs(t);for(let e=0;e<4;e++)r="abcdefghijklmnopqrstuvwxyz0123456789"[s%36]+r,s=Math.floor(s/36);return r},y=t=>{let r=N(t.title);console.log("文章链接:","/p/".concat(r)),e.push("/p/".concat(r,"?from=blog"))},w=t=>{let s=h===t?null:t;g(s);let a=new URLSearchParams;r&&(c.OZ.some(e=>e.category===r)?a.set("category",r):a.set("tag",r)),s&&a.set("year",s.toString());let l=a.toString()?"/blog?".concat(a.toString()):"/blog";e.push(l)},C=["科技","人文","社会","经济","政治","教育","艺术","体育","健康","环境","历史","哲学","心理学","法律","军事","娱乐","旅游","美食","时尚","建筑","音乐","文学","电影","其他"].map(e=>({name:e,count:c.OZ.filter(t=>t.category===e).length})),k=d?C:C.slice(0,9),L=c.OZ.filter(e=>{let t=!r||e.category===r||e.tags.includes(r),s=!h||(()=>{let t=e.date.match(/(\d{4})年/);return(t?parseInt(t[1]):new Date().getFullYear())===h})(),a=!u.trim()||e.title.toLowerCase().includes(u.toLowerCase())||e.category.toLowerCase().includes(u.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(u.toLowerCase()))||e.content&&e.content.toLowerCase().includes(u.toLowerCase());return t&&s&&a});return(0,s.jsx)("div",{className:"min-h-screen bg-background",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(n.Sidebar,{}),(0,s.jsx)("div",{className:"flex-1 lg:ml-64",children:(0,s.jsx)("main",{className:"px-6 lg:px-12 py-16 h-full flex flex-col justify-center",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto w-full",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"博客"})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"flex-1 space-y-4",children:L.length>0?L.map(e=>{let t=v(e.content,u),a=u.trim()&&e.content&&e.content.toLowerCase().includes(u.toLowerCase())&&!e.title.toLowerCase().includes(u.toLowerCase())&&!e.tags.some(e=>e.toLowerCase().includes(u.toLowerCase()));return(0,s.jsx)("article",{className:"group cursor-pointer",children:(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg hover:bg-card/80 transition-all duration-300 relative overflow-hidden ".concat(a?"h-auto min-h-20":"h-20"),onClick:()=>y(e),children:[(0,s.jsx)("div",{className:"pl-4 pr-6 ".concat(a?"pt-[16px] pb-[12px]":"pt-2 pb-1"," h-full flex items-center"),children:(0,s.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold leading-tight group-hover:text-primary transition-colors",children:b(e.title,u)}),t&&a&&(0,s.jsx)("div",{className:"text-sm text-muted-foreground ml-1 leading-relaxed translate-y-px pl-4",children:b(t,u)}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-[13px] text-muted-foreground w-28",children:e.date}),(0,s.jsx)("span",{onClick:t=>{t.stopPropagation(),p(e.category)},className:"px-1.5 py-1 text-xs font-normal leading-none rounded-sm transition-colors cursor-pointer relative ".concat(r===e.category?"text-primary":"text-muted-foreground hover:text-foreground"),style:{background:r===e.category?"rgba(59, 130, 246, 0.2)":"rgba(107, 114, 128, 0.3)",transform:"translateY(-1px)"},children:b(e.category,u)}),(0,s.jsx)("div",{className:"flex gap-2 ml-2",children:e.tags.map((e,t)=>(0,s.jsxs)("span",{onClick:t=>{t.stopPropagation(),p(e)},className:"text-[13px] transition-colors cursor-pointer ".concat(r===e?"text-primary font-medium":"text-muted-foreground hover:text-foreground"),children:["#",b(e,u)]},t))})]})]})}),(0,s.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-0.5 bg-primary scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]})},e.id)}):(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"没有找到相关文章"})}),(0,s.jsxs)("div",{className:"w-80 space-y-4",children:[(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 ml-1",children:"搜索文章"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"搜索文章标题或内容...",value:u,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 text-sm bg-muted border border-border rounded-md focus:outline-none focus:ring-0 focus:border-border"}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u?(0,s.jsx)("button",{onClick:()=>f(""),className:"h-4 w-4 text-muted-foreground hover:text-foreground transition-colors",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}):(0,s.jsx)("svg",{className:"h-4 w-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 pr-6 relative",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 ml-1",children:"所有分类"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 ml-1",children:k.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>p(e.name),className:"flex items-center justify-between cursor-pointer transition-colors ".concat(r===e.name?"text-primary":"text-foreground hover:text-primary"),children:[(0,s.jsx)("span",{className:"text-sm truncate",children:e.name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground ml-2 flex-shrink-0",children:e.count})]},t))}),!d&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-card to-transparent pointer-events-none"})]}),C.length>9&&(0,s.jsxs)("button",{onClick:()=>m(!d),className:"flex items-center justify-center gap-1 text-sm text-muted-foreground hover:text-primary transition-colors mt-3 w-full py-2 bg-muted/50 rounded-md hover:bg-muted",children:[d?"收起":"查看全部",(0,s.jsx)(o.A,{className:"h-4 w-4 transition-transform ".concat(d?"rotate-180":"")})]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 pr-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 ml-1",children:"最新文章"}),(0,s.jsx)("div",{className:"space-y-3 ml-1",children:c.OZ.slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"group cursor-pointer",onClick:()=>y(e),children:[(0,s.jsx)("h4",{className:"text-sm font-medium group-hover:text-primary transition-colors line-clamp-1",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.date})]},t))})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 pr-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 ml-1",children:"文章归档"}),(0,s.jsx)("div",{className:"space-y-2 ml-1",children:Object.entries(c.OZ.reduce((e,t)=>{let r=t.date.match(/(\d{4})年/),s=r?parseInt(r[1]):new Date().getFullYear();return e[s]||(e[s]=[]),e[s].push(t),e},{})).sort((e,t)=>{let[r]=e,[s]=t;return Number(s)-Number(r)}).map(e=>{let[t,r]=e,a=h===Number(t);return(0,s.jsxs)("div",{className:"flex justify-between items-center cursor-pointer transition-colors ".concat(a?"text-primary":"hover:text-primary"),onClick:()=>w(Number(t)),children:[(0,s.jsxs)("span",{className:"text-sm",children:[t,"年"]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:r.length})]},t)})})]})]})]})]})})})]})})}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(2596),a=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},5380:(e,t,r)=>{Promise.resolve().then(r.bind(r,2066))},6474:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},9065:(e,t,r)=>{"use strict";r.d(t,{OZ:()=>a,rM:()=>c,yG:()=>s});let s=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;let r="",s=Math.abs(t);for(let e=0;e<4;e++)r="abcdefghijklmnopqrstuvwxyz0123456789"[s%36]+r,s=Math.floor(s/36);return r},a=[{id:1,title:"文章链接的生成原理",category:"科技",tags:["技术","算法","哈希"],date:"2025年10月12日",content:"## 什么是文章链接？\n每篇文章都有一个独特的链接，比如这篇文章的链接是：`/p/".concat(s("文章链接的生成原理"),'`\n## 链接是怎么生成的？\n### 第一步：把标题变成数字\n就像给每个字母分配一个号码一样：\n- 文 = 25991\n- 章 = 31456\n- 链 = 38142\n- 接 = 25509\n- 的 = 30340\n- 生 = 29983\n- 成 = 25104\n- 原 = 21407\n- 理 = 29702\n### 第二步：计算哈希值\n用一个特殊的数学公式把这些数字组合起来，得到一个很大的数字。这个公式确保：\n- 相同的标题总是得到相同的数字\n- 不同的标题得到不同的数字\n### 第三步：转换成4位代码\n把大数字转换成4位代码，只使用：\n- 26个小写字母：a b c d e f g h i j k l m n o p q r s t u v w x y z\n- 10个数字：0 1 2 3 4 5 6 7 8 9\n就像把十进制数字转换成36进制一样！\n## 为什么这样做？\n1. **唯一性**：每篇文章都有独特的链接\n2. **简洁性**：链接很短，只有4个字符\n3. **友好性**：只包含字母和数字，适合在网址中使用\n4. **一致性**：相同的标题总是生成相同的链接\n## 实际例子\n"文章链接的生成原理" → 哈希计算 → 36进制转换 → "').concat(s("文章链接的生成原理"),'"\n所以这篇文章的完整链接就是：`/p/').concat(s("文章链接的生成原理"),"`\n是不是很有趣？这就是现代网站生成文章链接的简单原理！")}],l=e=>e.replace(/^#{1,6}\s+/gm,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/^\s*[-*+]\s+/gm,"• ").replace(/^\s*\d+\.\s+/gm,"").replace(/\n+/g," ").trim(),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=l(e);return r.length>t?r.substring(0,t)+"...":r},o=()=>a.map(e=>({id:e.id,category:e.category,title:e.title,excerpt:n(e.content),date:e.date,readTime:"3 分钟"})),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return o().slice(0,e)}},9685:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>m});var s=r(5155),a=r(7340),l=r(7434),n=r(3786),o=r(1284),c=r(3999),i=r(5695);let d=[{icon:a.A,label:"首页",active:!0},{icon:l.A,label:"博客",active:!1},{icon:n.A,label:"链接",active:!1},{icon:o.A,label:"关于",active:!1}];function m(){let e=(0,i.useRouter)(),t=(0,i.usePathname)(),r=(()=>{switch(t){case"/":return"首页";case"/blog":return"博客";case"/links":return"链接";case"/about":return"关于";default:if(t.startsWith("/p/"))return null;return"首页"}})(),a=t=>{switch(t){case"首页":e.push("/");break;case"博客":e.push("/blog");break;case"链接":e.push("/links");break;case"关于":e.push("/about")}};return(0,s.jsxs)("aside",{className:"hidden lg:flex w-64 h-screen fixed left-0 top-0 flex-col border-r border-border/40 bg-sidebar p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 flex items-center justify-center",children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-7 w-7 text-white fill-current",children:[(0,s.jsx)("rect",{x:"2",y:"2",width:"9",height:"9",fill:"currentColor"}),(0,s.jsx)("rect",{x:"13",y:"2",width:"9",height:"9",fill:"currentColor"}),(0,s.jsx)("rect",{x:"2",y:"13",width:"9",height:"9",fill:"currentColor"}),(0,s.jsx)("rect",{x:"13",y:"13",width:"9",height:"9",fill:"currentColor"})]})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-foreground leading-tight",children:"forthing.top"})})]})}),(0,s.jsx)("nav",{className:"space-y-2",children:d.map(e=>{let t=e.icon,l=r===e.label;return(0,s.jsxs)("button",{onClick:()=>a(e.label),className:(0,c.cn)("flex w-full items-center gap-3 rounded-lg px-4 py-2.5 text-sm font-medium transition-colors duration-200",l?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground hover:bg-sidebar-accent/50"),children:[(0,s.jsx)(t,{className:"h-4 w-4 flex-shrink-0"}),e.label]},e.label)})}),(0,s.jsxs)("div",{className:"mt-auto pt-6 space-y-1 text-center",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xa9 2025 forthing.top"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,s.jsx)("a",{href:"https://icp.gov.moe/?keyword=20250119",target:"_blank",rel:"noopener noreferrer",className:"hover:text-foreground transition-colors duration-200",children:"萌ICP备20250119号"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[645,441,684,358],()=>t(5380)),_N_E=e.O()}]);